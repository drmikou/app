
<?php

define('DB_SERVER', 'localhost'); // serveur mysql
define('DB_SERVER_USERNAME', 'root'); // nom d'utilisateur
define('DB_SERVER_PASSWORD', ''); // mot de passe
define('DB_DATABASE', 'app'); // nom de la base

  ?>

<?php
    // Connexion au serveur mysql
    $connect = mysql_connect('localhost', 'root',
    '')
    or die('Impossible de se connecter : ' . mysql_error());
    // sélection de la base de données
    mysql_select_db(app, $connect);
    
    ?>

<?php
    $msg_erreur = "Erreur. Les champs suivants doivent être obligatoirement remplis :
    <br/><br/>";
    $msg_ok = "Votre demande a bien été prise en compte.";
    $message = $msg_erreur;
    
    
    
    if (empty($_POST['name']))
    { $message .= "Votre nom<br/>";
    }
    if (empty($_POST['surname']))
    {$message .= "Votre prénom<br/>";}
    if (empty($_POST['birth']))
    {$message .= "Votre date de naissance<br/>";}
    if (empty($_POST['pseudo']))
    {$message .= "Votre pseudo<br/>";}
    if (empty($_POST['password']))
    {$message .= "Votre mot de passe<br/>";}
    if (empty($_POST['confirm_password']))
    {$message = "Confirmez votre mot de passe<br/>";}
    if (empty($_POST['street']))
    {$message .= "Votre rue<br/>";}
    if (empty($_POST['town']))
    {$message .= "Votre ville<br/>";}
    if((strlen(password) > 3) AND (strlen(password) < 15))
    {$message = "Votre mot de passe ne correspond pas au format demandé";
    if($_POST['pasword'] != $_POST['confirm_pasword'])
    {$message = "Vos deux mots de passe ne correspondent pas";}
    if($_POST['mail'] != $_POST['confirm_email'])
    {$message = "Vos deux adresses mail ne correspondent pas";}
    
        if (strlen($message) > strlen($msg_erreur)) {
        echo $message;
        } 
        else {
      foreach($_POST as $index => $valeur) {
        $$index = mysql_real_escape_string(trim($valeur));
      }
        }
          $sql = "INSERT INTO user('','user_login','user_password,'user_name','user_surname','user_mail','user_birth', 'user_sup', 'user_town', 'user_street',user_region','user_photo','user_phone') VALUES ('', '".$login."','".$password."','".$name."','".$surname."','".$birth."','".$sup."','".$town."','".$street."',  '".$photo."','".$phone."')";
      $res = mysql_query($sql);
     
      if ($res) {
        echo $msg_ok;
      } else {
        echo mysql_error();
     }
     
    }
    
    
    
    
    ?>
